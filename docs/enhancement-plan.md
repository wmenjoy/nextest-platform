# æµ‹è¯•ç®¡ç†æ¡†æ¶å¢å¼ºæ–¹æ¡ˆ

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-21
**ä½œè€…**: æµ‹è¯•æ¡†æ¶å›¢é˜Ÿ

---

## ğŸ“‘ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [éœ€æ±‚åˆ†æ](#éœ€æ±‚åˆ†æ)
3. [æŠ€æœ¯æ–¹æ¡ˆ](#æŠ€æœ¯æ–¹æ¡ˆ)
4. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
5. [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
6. [é£é™©è¯„ä¼°](#é£é™©è¯„ä¼°)
7. [é™„å½•](#é™„å½•)

---

## æ¦‚è¿°

### èƒŒæ™¯

å½“å‰æµ‹è¯•ç®¡ç†ç³»ç»Ÿæä¾›äº†åŸºç¡€çš„æµ‹è¯•ç”¨ä¾‹ç®¡ç†å’Œæ‰§è¡Œèƒ½åŠ›ï¼Œä½†åœ¨ä»¥ä¸‹æ–¹é¢å­˜åœ¨å±€é™æ€§ï¼š

- æµ‹è¯•ç”¨ä¾‹éœ€è¦é€ä¸ªåˆ›å»ºï¼Œæ‰¹é‡ç®¡ç†æ•ˆç‡ä½
- ç¼ºä¹å¯¹å¤æ‚æµ‹è¯•åœºæ™¯çš„ç¼–æ’èƒ½åŠ›
- æµ‹è¯•é€»è¾‘å›ºåŒ–åœ¨é…ç½®ä¸­ï¼Œçµæ´»æ€§ä¸è¶³
- å‰ç«¯å·¥ç¨‹åŒ–æ°´å¹³è¾ƒä½ï¼Œéš¾ä»¥æ”¯æ’‘å¤æ‚äº¤äº’

### ç›®æ ‡

å°†å½“å‰ç³»ç»Ÿä»**ç®€å•çš„æµ‹è¯•ç®¡ç†å·¥å…·**å‡çº§ä¸º**ä¼ä¸šçº§æµ‹è¯•å¹³å°**ï¼Œæ”¯æŒï¼š

âœ… æµ‹è¯•ç”¨ä¾‹çš„æ‰¹é‡å¯¼å…¥å’Œæ•°æ®é©±åŠ¨æµ‹è¯•
âœ… å¤æ‚ä¸šåŠ¡æµç¨‹çš„å·¥ä½œæµç¼–æ’
âœ… çµæ´»çš„è„šæœ¬åŒ–æµ‹è¯•èƒ½åŠ›
âœ… æ ‡å‡†åŒ–çš„æ¨¡æ¿ç³»ç»Ÿ
âœ… ç°ä»£åŒ–çš„å‰ç«¯ç”¨æˆ·ä½“éªŒ

### é¢„æœŸæ”¶ç›Š

| æŒ‡æ ‡ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ | æå‡å¹…åº¦ |
|------|---------|---------|---------|
| æµ‹è¯•åˆ›å»ºæ•ˆç‡ | 1ä¸ª/åˆ†é’Ÿ | 100ä¸ª/åˆ†é’Ÿ | **100å€** |
| å¤æ‚åœºæ™¯æ”¯æŒ | ä¸æ”¯æŒ | æ”¯æŒå¤šæ­¥éª¤å·¥ä½œæµ | **è´¨çš„é£è·ƒ** |
| æµ‹è¯•çµæ´»æ€§ | é…ç½®é©±åŠ¨ | è„šæœ¬ + é…ç½®æ··åˆ | **10å€** |
| ç”¨æˆ·å­¦ä¹ æˆæœ¬ | éœ€ç†Ÿæ‚‰JSON | æ¨¡æ¿ + å¯è§†åŒ– | **é™ä½70%** |

---

## éœ€æ±‚åˆ†æ

### 1. æµ‹è¯•æ•°æ®æ–‡ä»¶å¯¼å…¥ä¸æ‰¹é‡æµ‹è¯•

#### ç—›ç‚¹

- **æ•ˆç‡ä½ä¸‹**: åˆ›å»º100ä¸ªæµ‹è¯•ç”¨ä¾‹éœ€è¦æ‰‹åŠ¨æ“ä½œ100æ¬¡
- **æ•°æ®è€¦åˆ**: æµ‹è¯•æ•°æ®å†…åµŒåœ¨æµ‹è¯•å®šä¹‰ä¸­ï¼Œéš¾ä»¥å¤ç”¨
- **åä½œå›°éš¾**: éæŠ€æœ¯äººå‘˜ï¼ˆQAã€äº§å“ï¼‰éš¾ä»¥å‚ä¸æµ‹è¯•æ•°æ®å‡†å¤‡
- **ç‰ˆæœ¬ç®¡ç†**: æµ‹è¯•æ•°æ®å˜æ›´éš¾ä»¥è¿½è¸ª

#### ç”¨æˆ·æ•…äº‹

> ä½œä¸ºä¸€åQAå·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦ä»Excelè¡¨æ ¼æ‰¹é‡å¯¼å…¥100ä¸ªAPIæµ‹è¯•ç”¨ä¾‹ï¼Œè¿™æ ·æˆ‘å¯ä»¥åœ¨10åˆ†é’Ÿå†…å®ŒæˆåŸæœ¬éœ€è¦2å°æ—¶çš„å·¥ä½œã€‚

> ä½œä¸ºä¸€åæµ‹è¯•è´Ÿè´£äººï¼Œæˆ‘éœ€è¦ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®é›†è¿è¡ŒåŒä¸€ä¸ªæµ‹è¯•é€»è¾‘ï¼Œä»¥è¦†ç›–è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸åœºæ™¯å’Œå¤§æ•°æ®é‡æƒ…å†µã€‚

#### æ ¸å¿ƒéœ€æ±‚

1. **æ–‡ä»¶å¯¼å…¥**
   - æ”¯æŒæ ¼å¼: CSV, Excel (.xlsx), JSON, YAML
   - å¯¼å…¥ç­–ç•¥: å¢é‡/è¦†ç›–/æ ¡éªŒ
   - é”™è¯¯å¤„ç†: è¯¦ç»†çš„éªŒè¯æŠ¥å‘Š

2. **æ•°æ®é©±åŠ¨æµ‹è¯•**
   - åˆ†ç¦»æµ‹è¯•é€»è¾‘å’Œæµ‹è¯•æ•°æ®
   - å‚æ•°åŒ–æµ‹è¯•æ‰§è¡Œ
   - æ•°æ®é›†ç‰ˆæœ¬ç®¡ç†

3. **æ‰¹é‡æ“ä½œ**
   - æŒ‰æ ‡ç­¾æ‰¹é‡æ‰§è¡Œ
   - æŒ‰æ–‡ä»¶æ‰¹é‡ç®¡ç†
   - æ‰¹é‡ç»“æœåˆ†æ

#### æŠ€æœ¯ä»·å€¼

- **æµ‹è¯•æ•ˆç‡**: æ‰¹é‡å¯¼å…¥å¯èŠ‚çœ **90%** çš„æµ‹è¯•åˆ›å»ºæ—¶é—´
- **æ•°æ®å¤ç”¨**: ä¸€ä¸ªæµ‹è¯•æ¨¡æ¿ + å¤šä¸ªæ•°æ®é›† = Nä¸ªæµ‹è¯•åœºæ™¯
- **å›¢é˜Ÿåä½œ**: QAå¯åœ¨Excelä¸­å‡†å¤‡æ•°æ®ï¼Œå¼€å‘å¯¼å…¥ç³»ç»Ÿ
- **æŒç»­é›†æˆ**: æµ‹è¯•æ•°æ®å¯çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼ŒCI/CDè‡ªåŠ¨è¿è¡Œ

---

### 2. å·¥ä½œæµå¼•æ“ä¸ç»„ä»¶åŒ–æµ‹è¯•

#### ç—›ç‚¹

- **åœºæ™¯å±€é™**: å½“å‰æµ‹è¯•æ˜¯åŸå­åŒ–çš„ï¼Œæ— æ³•è¡¨è¾¾çœŸå®ä¸šåŠ¡æµç¨‹
- **çŠ¶æ€å­¤ç«‹**: æµ‹è¯•é—´æ— æ³•å…±äº«çŠ¶æ€ï¼ˆå¦‚ç™»å½•tokenï¼‰
- **ä¾èµ–ç¼ºå¤±**: æ— æ³•å®šä¹‰æµ‹è¯•é—´çš„å‰ç½®/åç½®ä¾èµ–
- **å¤ç”¨å›°éš¾**: é€šç”¨æ­¥éª¤ï¼ˆå¦‚è®¤è¯ï¼‰éœ€è¦åœ¨æ¯ä¸ªæµ‹è¯•ä¸­é‡å¤å®šä¹‰

#### ç”¨æˆ·æ•…äº‹

> ä½œä¸ºä¸€åè‡ªåŠ¨åŒ–æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦ç¼–æ’ä¸€ä¸ª"æ³¨å†Œâ†’ç™»å½•â†’ä¸‹å•â†’æ”¯ä»˜â†’é€€æ¬¾"çš„å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•ï¼Œå…¶ä¸­æ¯ä¸€æ­¥éƒ½ä¾èµ–å‰ä¸€æ­¥çš„è¾“å‡ºã€‚

> ä½œä¸ºä¸€åAPIæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦å°†"è·å–è®¤è¯token"å°è£…ä¸ºå¯å¤ç”¨ç»„ä»¶ï¼Œåœ¨æ‰€æœ‰éœ€è¦è®¤è¯çš„æµ‹è¯•ä¸­å¼•ç”¨å®ƒã€‚

#### æ ¸å¿ƒéœ€æ±‚

1. **å·¥ä½œæµå®šä¹‰**
   - YAML/JSONæ ¼å¼çš„å·¥ä½œæµæè¿°
   - æ­¥éª¤é—´çš„é¡ºåº/å¹¶è¡Œæ‰§è¡Œ
   - æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯

2. **çŠ¶æ€ç®¡ç†**
   - æ­¥éª¤é—´çš„æ•°æ®ä¼ é€’ (å˜é‡ã€ä¸Šä¸‹æ–‡)
   - å…¨å±€/å±€éƒ¨å˜é‡ä½œç”¨åŸŸ
   - çŠ¶æ€æŒä¹…åŒ–å’Œæ¢å¤

3. **ç»„ä»¶åŒ–**
   - å¯å¤ç”¨çš„æµ‹è¯•ç‰‡æ®µ
   - å·¥ä½œæµæ¨¡æ¿
   - å­å·¥ä½œæµè°ƒç”¨

4. **é”™è¯¯å¤„ç†**
   - å¤±è´¥é‡è¯•ç­–ç•¥
   - å›æ»šæœºåˆ¶
   - éƒ¨åˆ†å¤±è´¥å¤„ç†

#### å·¥ä½œæµç¤ºä¾‹

```yaml
workflow:
  name: "ç”µå•†ä¸‹å•å®Œæ•´æµç¨‹"
  version: "1.0"

  # å…¨å±€å˜é‡
  variables:
    baseUrl: "https://api.example.com"
    retryCount: 3

  # å·¥ä½œæµæ­¥éª¤
  steps:
    - id: "register"
      name: "æ³¨å†Œæ–°ç”¨æˆ·"
      type: "http-test"
      testId: "user-register"
      input:
        username: "test_${timestamp}"
        email: "test_${timestamp}@example.com"
      output:
        userId: "response.data.id"  # ä¿å­˜ç”¨æˆ·IDåˆ°ä¸Šä¸‹æ–‡
      retry:
        maxAttempts: 3
        backoff: "exponential"

    - id: "login"
      name: "ç”¨æˆ·ç™»å½•"
      type: "http-test"
      testId: "user-login"
      dependsOn: ["register"]  # ä¾èµ–æ³¨å†Œæ­¥éª¤
      input:
        username: "${register.username}"
        password: "${register.password}"
      output:
        authToken: "response.data.token"
      onError: "abort"  # ç™»å½•å¤±è´¥åˆ™ä¸­æ­¢æ•´ä¸ªæµç¨‹

    - id: "create-order"
      name: "åˆ›å»ºè®¢å•"
      type: "http-test"
      testId: "order-create"
      dependsOn: ["login"]
      headers:
        Authorization: "Bearer ${login.authToken}"
      input:
        productId: "P12345"
        quantity: 2
      output:
        orderId: "response.data.orderId"
      onError: "continue"  # åˆ›å»ºå¤±è´¥ç»§ç»­æ‰§è¡Œï¼ˆä¸ºäº†æ¸…ç†èµ„æºï¼‰

    - id: "payment"
      name: "æ”¯ä»˜è®¢å•"
      type: "http-test"
      testId: "order-payment"
      when: "${create-order.status == 'success'}"  # æ¡ä»¶æ‰§è¡Œ
      dependsOn: ["create-order"]
      input:
        orderId: "${create-order.orderId}"
        amount: 100.00
      output:
        paymentId: "response.data.paymentId"

    - id: "cleanup"
      name: "æ¸…ç†æµ‹è¯•æ•°æ®"
      type: "http-test"
      testId: "cleanup-test-user"
      runOnFailure: true  # å³ä½¿å‰é¢å¤±è´¥ä¹Ÿæ‰§è¡Œ
      input:
        userId: "${register.userId}"
```

#### æŠ€æœ¯ä»·å€¼

- **åœºæ™¯è¦†ç›–**: å¯æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ—…ç¨‹ï¼Œç«¯åˆ°ç«¯æµ‹è¯•
- **ä»£ç å¤ç”¨**: é€šç”¨æ­¥éª¤å°è£…åï¼Œå‡å°‘ **80%** é‡å¤ä»£ç 
- **ç»´æŠ¤æ€§**: ä¸šåŠ¡æµç¨‹å˜æ›´åªéœ€ä¿®æ”¹å·¥ä½œæµå®šä¹‰
- **å¯è§†åŒ–**: å·¥ä½œæµå¯ç”Ÿæˆæµç¨‹å›¾ï¼Œä¾¿äºç†è§£å’Œæ²Ÿé€š

---

### 3. å‰ç«¯ç°ä»£åŒ–æ”¹é€ 

#### ç—›ç‚¹

- **å·¥ç¨‹åŒ–ç¼ºå¤±**: å½“å‰ä½¿ç”¨CDNå¼•å…¥Reactï¼Œæ— æ„å»ºæµç¨‹
- **å¼€å‘ä½“éªŒå·®**: æ— TypeScriptã€æ— çƒ­é‡è½½ã€æ— ç»„ä»¶å¤ç”¨
- **äº¤äº’å±€é™**: éš¾ä»¥å®ç°å¤æ‚çš„å·¥ä½œæµå¯è§†åŒ–ç¼–è¾‘å™¨
- **æ€§èƒ½é—®é¢˜**: å…¨é‡åŠ è½½ï¼Œæ— ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

#### ç”¨æˆ·æ•…äº‹

> ä½œä¸ºä¸€åæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘å¸Œæœ›é€šè¿‡æ‹–æ‹½çš„æ–¹å¼ç¼–æ’æµ‹è¯•å·¥ä½œæµï¼Œè€Œä¸æ˜¯æ‰‹å†™YAMLé…ç½®æ–‡ä»¶ã€‚

> ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œæˆ‘éœ€è¦å¿«é€Ÿå®šä½æµ‹è¯•å¤±è´¥çš„åŸå› ï¼Œé€šè¿‡äº¤äº’å¼çš„ç»“æœå¯è§†åŒ–ï¼ˆè°ƒç”¨é“¾ã€æ—¶åºå›¾ï¼‰è¿›è¡Œé—®é¢˜è¯Šæ–­ã€‚

#### æŠ€æœ¯é€‰å‹å¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ¨èåœºæ™¯ |
|------|------|------|----------|
| **Next.js** | â€¢ SSRä¼˜åŒ–æ€§èƒ½<br>â€¢ å…¨æ ˆèƒ½åŠ›<br>â€¢ ç”Ÿæ€æˆç†Ÿ<br>â€¢ SEOå‹å¥½ | â€¢ è¿‡åº¦è®¾è®¡ï¼ˆå¯¹å½“å‰éœ€æ±‚ï¼‰<br>â€¢ éƒ¨ç½²éœ€Node.js<br>â€¢ å­¦ä¹ æ›²çº¿é™¡å³­ | éœ€è¦SEOã€å¤æ‚æœåŠ¡ç«¯é€»è¾‘ |
| **Vite + React** | â€¢ è½»é‡å¿«é€Ÿ<br>â€¢ å¼€å‘ä½“éªŒå¥½<br>â€¢ çµæ´»å¯æ§<br>â€¢ TypeScriptæ”¯æŒ | â€¢ éœ€è¦è‡ªè¡Œé…ç½®è·¯ç”±ç­‰<br>â€¢ æ— SSR | âœ… **æ¨è**: çº¯å‰ç«¯SPAåº”ç”¨ |
| **ä¿æŒç°çŠ¶** | â€¢ é›¶æˆæœ¬<br>â€¢ ç¨³å®šæ€§é«˜ | â€¢ æ— å·¥ç¨‹åŒ–<br>â€¢ éš¾ä»¥æ‰©å±• | åŠŸèƒ½ç®€å•ã€ä¸è¿½æ±‚ä½“éªŒ |

#### æ¨èæ–¹æ¡ˆ: Vite + React + TypeScript

**ç†ç”±:**
1. å½“å‰åº”ç”¨æ˜¯çº¯å‰ç«¯SPAï¼Œä¸éœ€è¦SSR
2. Viteå¼€å‘ä½“éªŒä¼˜äºNext.jsï¼ˆHMRæ›´å¿«ï¼‰
3. è½»é‡åŒ–ï¼Œé¿å…è¿‡åº¦å·¥ç¨‹
4. ç”Ÿæ€å®Œå–„ï¼Œæ”¯æŒæ‰€éœ€çš„æ‰€æœ‰UIç»„ä»¶

#### æ ¸å¿ƒåŠŸèƒ½

1. **å·¥ä½œæµå¯è§†åŒ–ç¼–è¾‘å™¨**
   - æŠ€æœ¯æ ˆ: React Flow / GoJS
   - åŠŸèƒ½: æ‹–æ‹½ç¼–æ’ã€å®æ—¶é¢„è§ˆã€è‡ªåŠ¨å¸ƒå±€

2. **æµ‹è¯•ç»“æœå¯è§†åŒ–**
   - è°ƒç”¨é“¾å›¾ (ç±»ä¼¼Jaeger)
   - æ—¶åºå›¾
   - æ€§èƒ½ç«ç„°å›¾

3. **æ¨¡æ¿å¸‚åœº**
   - æµè§ˆã€æœç´¢ã€é¢„è§ˆæ¨¡æ¿
   - ä¸€é”®å…‹éš†å’Œè‡ªå®šä¹‰

4. **å®æ—¶ç›‘æ§**
   - WebSocketå®æ—¶æ¨é€æµ‹è¯•æ‰§è¡ŒçŠ¶æ€
   - è¿›åº¦æ¡ã€æ—¥å¿—æµ

---

### 4. æµ‹è¯•è„šæœ¬æ”¯æŒ (Lua + JSON)

#### ç—›ç‚¹

- **é€»è¾‘å—é™**: JSONé…ç½®æ˜¯å£°æ˜å¼çš„ï¼Œæ— æ³•è¡¨è¾¾å¤æ‚é€»è¾‘
- **åŠ¨æ€èƒ½åŠ›å¼±**: æ— æ³•åŠ¨æ€ç”Ÿæˆæ•°æ®ã€å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­
- **æ‰©å±•å›°éš¾**: æ–°å¢æ–­è¨€ç±»å‹éœ€è¦ä¿®æ”¹åç«¯ä»£ç 

#### ç”¨æˆ·æ•…äº‹

> ä½œä¸ºä¸€åé«˜çº§æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦åœ¨æµ‹è¯•ä¸­åŠ¨æ€ç”Ÿæˆéšæœºæ•°æ®ï¼Œå¹¶ç¼–å†™å¤æ‚çš„ä¸šåŠ¡é€»è¾‘éªŒè¯ï¼ˆå¦‚è®¡ç®—è®¢å•æ€»é¢æ˜¯å¦æ­£ç¡®ï¼‰ã€‚

> ä½œä¸ºä¸€åæ€§èƒ½æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæˆ‘éœ€è¦ç¼–å†™å¾ªç¯è„šæœ¬ï¼Œæ¨¡æ‹Ÿ100ä¸ªå¹¶å‘ç”¨æˆ·çš„è¡Œä¸ºã€‚

#### ä¸ºä»€ä¹ˆé€‰æ‹© Lua?

| ç‰¹æ€§ | Lua | Python | JavaScript |
|------|-----|--------|-----------|
| **ä½“ç§¯** | 200KB | 30MB+ | å–å†³äºè¿è¡Œæ—¶ |
| **åµŒå…¥æ€§** | âœ… ä¸“ä¸ºåµŒå…¥è®¾è®¡ | âš ï¸ éœ€è¦ç‹¬ç«‹è¿›ç¨‹ | âš ï¸ éœ€è¦V8å¼•æ“ |
| **å®‰å…¨æ€§** | âœ… æ˜“äºæ²™ç®±åŒ– | âŒ éš¾ä»¥é™åˆ¶ | âš ï¸ ä¸­ç­‰ |
| **æ€§èƒ½** | âœ… å¿«é€Ÿ | âš ï¸ è¾ƒæ…¢ | âœ… å¿«é€Ÿ |
| **Goé›†æˆ** | âœ… gopher-lua | âš ï¸ execè°ƒç”¨ | âš ï¸ goja |
| **æˆç†Ÿåº¦** | âœ… Kong, Nginx, Redis | âœ… å¹¿æ³›ä½¿ç”¨ | âœ… å¹¿æ³›ä½¿ç”¨ |

**ç»“è®º**: Luaæ˜¯åµŒå…¥å¼è„šæœ¬çš„æœ€ä½³é€‰æ‹©

#### ä½¿ç”¨åœºæ™¯

**åœºæ™¯1: åŠ¨æ€æ•°æ®ç”Ÿæˆ**
```lua
-- ç”Ÿæˆæµ‹è¯•ç”¨æˆ·æ•°æ®
function generateUsers(count)
    local users = {}
    for i = 1, count do
        table.insert(users, {
            username = "user_" .. math.random(10000, 99999),
            email = "user" .. i .. "@test.com",
            age = math.random(18, 60)
        })
    end
    return users
end
```

**åœºæ™¯2: å¤æ‚ä¸šåŠ¡éªŒè¯**
```lua
-- éªŒè¯è®¢å•è®¡ç®—é€»è¾‘
function validateOrder(response)
    local order = response.data
    local calculatedTotal = 0

    -- è®¡ç®—å•†å“æ€»ä»·
    for _, item in ipairs(order.items) do
        calculatedTotal = calculatedTotal + (item.price * item.quantity)
    end

    -- åŠ ä¸Šè¿è´¹
    if calculatedTotal < 100 then
        calculatedTotal = calculatedTotal + order.shippingFee
    end

    -- å‡å»æŠ˜æ‰£
    calculatedTotal = calculatedTotal * (1 - order.discountRate)

    -- éªŒè¯
    if math.abs(calculatedTotal - order.totalAmount) > 0.01 then
        return false, string.format(
            "è®¢å•æ€»é¢é”™è¯¯: æœŸæœ› %.2f, å®é™… %.2f",
            calculatedTotal, order.totalAmount
        )
    end

    return true
end
```

**åœºæ™¯3: æ¡ä»¶é€»è¾‘**
```lua
-- æ ¹æ®ç¯å¢ƒé€‰æ‹©ä¸åŒçš„é…ç½®
function getConfig()
    local env = os.getenv("ENV") or "test"

    if env == "prod" then
        return {
            baseUrl = "https://api.production.com",
            timeout = 30
        }
    elseif env == "staging" then
        return {
            baseUrl = "https://api.staging.com",
            timeout = 60
        }
    else
        return {
            baseUrl = "http://localhost:8080",
            timeout = 120
        }
    end
end
```

#### JSON + Lua æ··åˆæ¨¡å¼

```json
{
  "testId": "complex-order-test",
  "name": "å¤æ‚è®¢å•éªŒè¯",
  "type": "http",
  "http": {
    "method": "POST",
    "path": "/api/orders"
  },
  "luaScript": {
    "beforeRequest": "generateOrderData()",
    "afterResponse": "validateOrder(response)",
    "customAssertion": "checkBusinessRules(data)"
  }
}
```

#### å®‰å…¨æœºåˆ¶

| å®‰å…¨æªæ–½ | è¯´æ˜ |
|---------|------|
| **æ²™ç®±æ‰§è¡Œ** | ç¦ç”¨ `os`, `io`, `debug` ç­‰å±é™©æ¨¡å— |
| **æ‰§è¡Œè¶…æ—¶** | é»˜è®¤5ç§’ï¼Œé˜²æ­¢æ­»å¾ªç¯ |
| **å†…å­˜é™åˆ¶** | é™åˆ¶è„šæœ¬å¯ç”¨å†…å­˜ |
| **ä»£ç å®¡æŸ¥** | æ•æ„Ÿæ“ä½œéœ€è¦äººå·¥å®¡æ ¸ |
| **æƒé™æ§åˆ¶** | æ™®é€šç”¨æˆ·åªèƒ½è¿è¡Œé¢„å®šä¹‰è„šæœ¬ |

---

### 5. æ¨¡æ¿ç³»ç»Ÿ

#### ç—›ç‚¹

- **é‡å¤åŠ³åŠ¨**: ç›¸ä¼¼çš„æµ‹è¯•éœ€è¦é‡å¤ç¼–å†™é…ç½®
- **æ ‡å‡†ç¼ºå¤±**: å›¢é˜Ÿæˆå‘˜ç¼–å†™é£æ ¼ä¸ä¸€è‡´
- **å­¦ä¹ æˆæœ¬**: æ–°æ‰‹ä¸çŸ¥é“å¦‚ä½•ç¼–å†™è§„èŒƒçš„æµ‹è¯•
- **ç»´æŠ¤å›°éš¾**: æœ€ä½³å®è·µå˜æ›´éœ€è¦æ‰¹é‡ä¿®æ”¹æµ‹è¯•

#### ç”¨æˆ·æ•…äº‹

> ä½œä¸ºä¸€åæ–°å…¥èŒçš„QAï¼Œæˆ‘å¸Œæœ›ä»æ¨¡æ¿åº“ä¸­é€‰æ‹©"RESTful CRUDæµ‹è¯•"æ¨¡æ¿ï¼Œå¡«å…¥APIåœ°å€å’Œèµ„æºåç§°ï¼Œå°±èƒ½ç”Ÿæˆå®Œæ•´çš„å¢åˆ æ”¹æŸ¥æµ‹è¯•å¥—ä»¶ã€‚

> ä½œä¸ºä¸€åæµ‹è¯•è´Ÿè´£äººï¼Œæˆ‘éœ€è¦åˆ›å»ºå›¢é˜Ÿæ ‡å‡†æ¨¡æ¿ï¼Œç¡®ä¿æ‰€æœ‰æµ‹è¯•éƒ½åŒ…å«å¿…è¦çš„æ–­è¨€ï¼ˆå¦‚å“åº”æ—¶é—´ã€é”™è¯¯å¤„ç†ï¼‰ã€‚

#### æ¨¡æ¿ç±»å‹

**1. å˜é‡æ›¿æ¢æ¨¡æ¿**

æœ€ç®€å•çš„æ¨¡æ¿å½¢å¼ï¼Œæ”¯æŒå˜é‡å ä½ç¬¦ã€‚

```json
{
  "name": "RESTful CRUD æ¨¡æ¿",
  "description": "æ ‡å‡†çš„å¢åˆ æ”¹æŸ¥æµ‹è¯•å¥—ä»¶",
  "category": "APIæµ‹è¯•",
  "variables": [
    {
      "name": "resource",
      "description": "èµ„æºåç§°ï¼ˆå¦‚ users, productsï¼‰",
      "type": "string",
      "required": true
    },
    {
      "name": "baseUrl",
      "description": "APIåŸºç¡€åœ°å€",
      "type": "string",
      "default": "http://localhost:8080/api"
    }
  ],
  "tests": [
    {
      "name": "åˆ›å»º${resource}",
      "type": "http",
      "http": {
        "method": "POST",
        "path": "${baseUrl}/${resource}",
        "body": {
          "name": "æµ‹è¯•æ•°æ®"
        }
      },
      "assertions": [
        {"type": "status_code", "expected": 201},
        {"type": "response_time", "lessThan": 1000}
      ],
      "saveResponse": "createdId:response.data.id"
    },
    {
      "name": "æŸ¥è¯¢${resource}åˆ—è¡¨",
      "type": "http",
      "http": {
        "method": "GET",
        "path": "${baseUrl}/${resource}"
      },
      "assertions": [
        {"type": "status_code", "expected": 200},
        {"type": "json_schema", "schema": "array"}
      ]
    },
    {
      "name": "è·å–${resource}è¯¦æƒ…",
      "type": "http",
      "http": {
        "method": "GET",
        "path": "${baseUrl}/${resource}/${createdId}"
      },
      "assertions": [
        {"type": "status_code", "expected": 200}
      ]
    },
    {
      "name": "æ›´æ–°${resource}",
      "type": "http",
      "http": {
        "method": "PUT",
        "path": "${baseUrl}/${resource}/${createdId}",
        "body": {
          "name": "æ›´æ–°åçš„æ•°æ®"
        }
      },
      "assertions": [
        {"type": "status_code", "expected": 200}
      ]
    },
    {
      "name": "åˆ é™¤${resource}",
      "type": "http",
      "http": {
        "method": "DELETE",
        "path": "${baseUrl}/${resource}/${createdId}"
      },
      "assertions": [
        {"type": "status_code", "expected": 204}
      ]
    }
  ]
}
```

**2. æ¨¡æ¿ç»§æ‰¿**

æ”¯æŒåŸºç¡€æ¨¡æ¿ + æ‰©å±•çš„æ–¹å¼ã€‚

```yaml
# åŸºç¡€HTTPæµ‹è¯•æ¨¡æ¿
base-http-test:
  type: http
  timeout: 30
  assertions:
    - type: status_code
      expected: 200
    - type: response_time
      lessThan: 1000

# è®¤è¯HTTPæµ‹è¯•æ¨¡æ¿ï¼ˆç»§æ‰¿åŸºç¡€æ¨¡æ¿ï¼‰
authenticated-http-test:
  extends: base-http-test
  headers:
    Authorization: "Bearer ${authToken}"
  setupHooks:
    - name: "è·å–è®¤è¯token"
      type: http
      http:
        method: POST
        path: /api/auth/login
      saveResponse: "authToken"

# å…·ä½“æµ‹è¯•ç»§æ‰¿è®¤è¯æ¨¡æ¿
my-api-test:
  extends: authenticated-http-test
  name: "è·å–ç”¨æˆ·ä¿¡æ¯"
  http:
    method: GET
    path: /api/users/me
```

**3. æ¨¡æ¿ç»„åˆ**

å°†å¤šä¸ªæ¨¡æ¿ç‰‡æ®µç»„åˆæˆå®Œæ•´æµ‹è¯•ã€‚

```yaml
test:
  name: "å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œæµç¨‹"
  components:
    - template: "email-validation"
      input:
        email: "${testEmail}"

    - template: "password-strength-check"
      input:
        password: "${testPassword}"

    - template: "duplicate-check"
      input:
        username: "${testUsername}"

    - template: "create-user-api"
      input:
        email: "${testEmail}"
        password: "${testPassword}"
        username: "${testUsername}"
```

#### æ¨¡æ¿å¸‚åœº

**å®˜æ–¹æ¨¡æ¿åº“**:
- RESTful CRUD
- è®¤è¯æˆæƒ (OAuth, JWT, Session)
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- åˆ†é¡µæŸ¥è¯¢
- æ‰¹é‡æ“ä½œ
- WebSocketè¿æ¥
- GraphQLæŸ¥è¯¢

**å›¢é˜Ÿç§æœ‰æ¨¡æ¿**:
- ä¸šåŠ¡ç‰¹å®šæµç¨‹
- å†…éƒ¨APIè§„èŒƒ
- åˆè§„æ€§æ£€æŸ¥

**æ¨¡æ¿è¯„åˆ†ç³»ç»Ÿ**:
- â­ï¸ ä½¿ç”¨æ¬¡æ•°
- ğŸ“ æ–‡æ¡£å®Œæ•´åº¦
- âœ… æµ‹è¯•è¦†ç›–ç‡
- ğŸ’¬ ç”¨æˆ·è¯„ä»·

---

## æŠ€æœ¯æ–¹æ¡ˆ

### æŠ€æœ¯æ ˆé€‰å‹

#### åç«¯

| ç»„ä»¶ | å½“å‰ | ç›®æ ‡ | ç†ç”± |
|------|------|------|------|
| **è¯­è¨€** | Go 1.24 | Go 1.24+ | ä¿æŒä¸å˜ |
| **æ¡†æ¶** | Gin | Gin | æˆç†Ÿç¨³å®š |
| **æ•°æ®åº“** | SQLite | PostgreSQL (å¯é€‰) | æ”¯æŒé«˜å¹¶å‘ |
| **è„šæœ¬å¼•æ“** | - | gopher-lua | åµŒå…¥å¼Lua VM |
| **å·¥ä½œæµå¼•æ“** | - | è‡ªç ” | è½»é‡å¯æ§ |

#### å‰ç«¯

| ç»„ä»¶ | å½“å‰ | ç›®æ ‡ | ç†ç”± |
|------|------|------|------|
| **æ¡†æ¶** | React (CDN) | Vite + React 18 | å·¥ç¨‹åŒ– |
| **è¯­è¨€** | JavaScript | TypeScript | ç±»å‹å®‰å…¨ |
| **UIåº“** | Ant Design 5 | Ant Design 5 | ä¿æŒä¸€è‡´ |
| **çŠ¶æ€ç®¡ç†** | - | Zustand | è½»é‡ç®€æ´ |
| **å¯è§†åŒ–** | - | React Flow | å·¥ä½œæµç¼–è¾‘ |
| **å›¾è¡¨** | - | ECharts | ç»“æœå¯è§†åŒ– |

### æ ¸å¿ƒæ¨¡å—è®¾è®¡

#### 1. æ•°æ®å¯¼å…¥æ¨¡å—

**APIè®¾è®¡**:
```go
// POST /api/v2/import/tests
type ImportRequest struct {
    Format      string          `json:"format"`      // csv, excel, json, yaml
    Data        string          `json:"data"`        // Base64ç¼–ç çš„æ–‡ä»¶å†…å®¹
    Strategy    string          `json:"strategy"`    // create, update, upsert
    DryRun      bool            `json:"dryRun"`      // åªéªŒè¯ä¸å¯¼å…¥
    GroupID     string          `json:"groupId"`     // ç›®æ ‡åˆ†ç»„
}

type ImportResponse struct {
    TotalRows   int             `json:"totalRows"`
    SuccessRows int             `json:"successRows"`
    FailedRows  int             `json:"failedRows"`
    Errors      []ImportError   `json:"errors"`
    TestIDs     []string        `json:"testIds"`     // åˆ›å»ºçš„æµ‹è¯•IDåˆ—è¡¨
}
```

**Excelæ ¼å¼ç¤ºä¾‹**:

| testId | groupId | name | type | method | path | assertions | tags |
|--------|---------|------|------|--------|------|------------|------|
| test-1 | api-tests | è·å–ç”¨æˆ·åˆ—è¡¨ | http | GET | /api/users | [{"type":"status_code","expected":200}] | api,smoke |
| test-2 | api-tests | åˆ›å»ºç”¨æˆ· | http | POST | /api/users | [{"type":"status_code","expected":201}] | api,critical |

#### 2. å·¥ä½œæµå¼•æ“

**å·¥ä½œæµå®šä¹‰**:
```go
type Workflow struct {
    ID          string              `json:"id"`
    Name        string              `json:"name"`
    Version     string              `json:"version"`
    Variables   map[string]string   `json:"variables"`
    Steps       []WorkflowStep      `json:"steps"`
}

type WorkflowStep struct {
    ID          string              `json:"id"`
    Name        string              `json:"name"`
    Type        string              `json:"type"`        // http-test, lua-script, sub-workflow
    TestID      string              `json:"testId"`      // å¼•ç”¨çš„æµ‹è¯•ID
    DependsOn   []string            `json:"dependsOn"`   // ä¾èµ–çš„æ­¥éª¤ID
    Input       map[string]string   `json:"input"`       // è¾“å…¥å˜é‡æ˜ å°„
    Output      map[string]string   `json:"output"`      // è¾“å‡ºå˜é‡æ˜ å°„
    When        string              `json:"when"`        // æ¡ä»¶è¡¨è¾¾å¼
    OnError     string              `json:"onError"`     // abort, continue, retry
    Retry       *RetryConfig        `json:"retry"`
}

type WorkflowContext struct {
    Variables   map[string]interface{}  // å…¨å±€å˜é‡
    StepResults map[string]*StepResult  // æ­¥éª¤æ‰§è¡Œç»“æœ
}
```

**æ‰§è¡Œå¼•æ“**:
```go
type WorkflowEngine struct {
    executor    *testcase.Executor
    luaVM       *lua.LState
}

func (e *WorkflowEngine) Execute(workflow *Workflow) *WorkflowResult {
    ctx := NewWorkflowContext(workflow.Variables)

    // æ‹“æ‰‘æ’åºï¼Œç¡®å®šæ‰§è¡Œé¡ºåº
    executionOrder := e.topologicalSort(workflow.Steps)

    for _, step := range executionOrder {
        // è¯„ä¼°æ¡ä»¶
        if !e.evaluateCondition(step.When, ctx) {
            continue
        }

        // æ‰§è¡Œæ­¥éª¤
        result := e.executeStep(step, ctx)
        ctx.StepResults[step.ID] = result

        // é”™è¯¯å¤„ç†
        if result.Error != nil {
            switch step.OnError {
            case "abort":
                return &WorkflowResult{Status: "failed", Error: result.Error}
            case "retry":
                result = e.retryStep(step, ctx)
            case "continue":
                // ç»§ç»­æ‰§è¡Œ
            }
        }
    }

    return &WorkflowResult{Status: "success", Context: ctx}
}
```

#### 3. Luaè„šæœ¬å¼•æ“

**é›†æˆgopher-lua**:
```go
import "github.com/yuin/gopher-lua"

type LuaScriptEngine struct {
    vm *lua.LState
}

func NewLuaScriptEngine() *LuaScriptEngine {
    L := lua.NewState()

    // å®‰å…¨æ²™ç®±ï¼šç¦ç”¨å±é™©æ¨¡å—
    L.SetGlobal("os", lua.LNil)
    L.SetGlobal("io", lua.LNil)
    L.SetGlobal("debug", lua.LNil)

    // æ³¨å†Œè‡ªå®šä¹‰å‡½æ•°
    L.SetGlobal("httpRequest", L.NewFunction(luaHTTPRequest))
    L.SetGlobal("sleep", L.NewFunction(luaSleep))

    return &LuaScriptEngine{vm: L}
}

func (e *LuaScriptEngine) Execute(script string, context map[string]interface{}) (interface{}, error) {
    // è®¾ç½®ä¸Šä¸‹æ–‡å˜é‡
    for k, v := range context {
        e.vm.SetGlobal(k, convertToLuaValue(v))
    }

    // æ‰§è¡Œè„šæœ¬ï¼ˆå¸¦è¶…æ—¶ï¼‰
    done := make(chan error, 1)
    go func() {
        done <- e.vm.DoString(script)
    }()

    select {
    case err := <-done:
        if err != nil {
            return nil, err
        }
        return e.vm.Get(-1), nil
    case <-time.After(5 * time.Second):
        return nil, errors.New("script execution timeout")
    }
}
```

**é¢„å®šä¹‰çš„Luaå‡½æ•°**:
```lua
-- HTTPè¯·æ±‚
response = httpRequest({
    method = "GET",
    url = "https://api.example.com/users",
    headers = {["Authorization"] = "Bearer " .. token}
})

-- JSONè§£æ
data = json.decode(response.body)

-- æ—¥å¿—è¾“å‡º
log.info("Found " .. #data .. " users")

-- æ–­è¨€
assert(response.statusCode == 200, "Status code should be 200")
assert(#data > 0, "Should have at least one user")
```

#### 4. æ¨¡æ¿ç®¡ç†

**æ¨¡æ¿å­˜å‚¨**:
```go
type Template struct {
    ID          string                 `json:"id"`
    Name        string                 `json:"name"`
    Description string                 `json:"description"`
    Category    string                 `json:"category"`
    Variables   []TemplateVariable     `json:"variables"`
    Content     interface{}            `json:"content"`  // æµ‹è¯•å®šä¹‰æˆ–å·¥ä½œæµå®šä¹‰
    IsOfficial  bool                   `json:"isOfficial"`
    UsageCount  int                    `json:"usageCount"`
    Rating      float64                `json:"rating"`
}

type TemplateVariable struct {
    Name        string      `json:"name"`
    Description string      `json:"description"`
    Type        string      `json:"type"`        // string, number, boolean
    Required    bool        `json:"required"`
    Default     interface{} `json:"default"`
}
```

**å˜é‡æ›¿æ¢**:
```go
func (t *Template) Render(values map[string]interface{}) (interface{}, error) {
    // éªŒè¯å¿…éœ€å˜é‡
    for _, v := range t.Variables {
        if v.Required && values[v.Name] == nil {
            return nil, fmt.Errorf("missing required variable: %s", v.Name)
        }
    }

    // åº”ç”¨é»˜è®¤å€¼
    for _, v := range t.Variables {
        if values[v.Name] == nil && v.Default != nil {
            values[v.Name] = v.Default
        }
    }

    // å˜é‡æ›¿æ¢
    contentJSON, _ := json.Marshal(t.Content)
    contentStr := string(contentJSON)

    for k, v := range values {
        placeholder := fmt.Sprintf("${%s}", k)
        contentStr = strings.ReplaceAll(contentStr, placeholder, fmt.Sprint(v))
    }

    var result interface{}
    json.Unmarshal([]byte(contentStr), &result)
    return result, nil
}
```

---

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presentation Layer                      â”‚
â”‚              (Vite + React + TypeScript)                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  å·¥ä½œæµ    â”‚  â”‚  æµ‹è¯•ç»“æœ  â”‚  â”‚  æ¨¡æ¿å¸‚åœº  â”‚           â”‚
â”‚  â”‚  ç¼–è¾‘å™¨    â”‚  â”‚  å¯è§†åŒ–    â”‚  â”‚           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†• REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway (Gin)                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æµ‹è¯•ç®¡ç† â”‚  â”‚ å·¥ä½œæµ   â”‚  â”‚ æ¨¡æ¿ç®¡ç† â”‚  â”‚ æ•°æ®å¯¼å…¥ â”‚  â”‚
â”‚  â”‚ API      â”‚  â”‚ API      â”‚  â”‚ API      â”‚  â”‚ API      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Layer                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Workflow    â”‚  â”‚  Template    â”‚  â”‚  Import/Export  â”‚  â”‚
â”‚  â”‚  Engine      â”‚  â”‚  Service     â”‚  â”‚  Service        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Execution Layer                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Test        â”‚  â”‚  Lua Script  â”‚  â”‚  Hook           â”‚  â”‚
â”‚  â”‚  Executor    â”‚  â”‚  Engine      â”‚  â”‚  Manager        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Data Layer                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL / SQLite                                 â”‚  â”‚
â”‚  â”‚  - Tests  - Workflows  - Templates  - Results       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®åº“è®¾è®¡

**æ–°å¢è¡¨**:

```sql
-- å·¥ä½œæµå®šä¹‰è¡¨
CREATE TABLE workflows (
    id VARCHAR(64) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    version VARCHAR(32),
    description TEXT,
    definition JSONB NOT NULL,  -- å·¥ä½œæµå®šä¹‰ï¼ˆæ­¥éª¤ã€å˜é‡ç­‰ï¼‰
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64)
);

-- å·¥ä½œæµæ‰§è¡Œå†å²
CREATE TABLE workflow_runs (
    id SERIAL PRIMARY KEY,
    workflow_id VARCHAR(64) REFERENCES workflows(id),
    status VARCHAR(32),  -- running, success, failed, cancelled
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    duration INTEGER,
    context JSONB,  -- æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆå˜é‡ã€æ­¥éª¤ç»“æœï¼‰
    error TEXT
);

-- æ¨¡æ¿è¡¨
CREATE TABLE templates (
    id VARCHAR(64) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    category VARCHAR(64),
    description TEXT,
    variables JSONB,  -- æ¨¡æ¿å˜é‡å®šä¹‰
    content JSONB NOT NULL,  -- æ¨¡æ¿å†…å®¹
    is_official BOOLEAN DEFAULT FALSE,
    usage_count INTEGER DEFAULT 0,
    rating DECIMAL(3, 2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64)
);

-- å¯¼å…¥å†å²
CREATE TABLE import_history (
    id SERIAL PRIMARY KEY,
    filename VARCHAR(255),
    format VARCHAR(32),
    total_rows INTEGER,
    success_rows INTEGER,
    failed_rows INTEGER,
    errors JSONB,
    created_test_ids JSONB,
    imported_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    imported_by VARCHAR(64)
);

-- Luaè„šæœ¬ç®¡ç†è¡¨
CREATE TABLE scripts (
    id VARCHAR(64) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    category VARCHAR(64),  -- utility, validation, data-generation, conversion, cleanup
    content TEXT NOT NULL,  -- Luaè„šæœ¬å†…å®¹
    parameters JSONB,  -- å‚æ•°å®šä¹‰ [{name, type, default, description}]
    tags TEXT[],  -- æ ‡ç­¾æ•°ç»„
    visibility VARCHAR(32) DEFAULT 'private',  -- public, team, private
    status VARCHAR(32) DEFAULT 'pending',  -- pending, approved, rejected
    approval_status_reason TEXT,  -- å®¡æ ¸æ‹’ç»åŸå› 
    current_version VARCHAR(32) DEFAULT 'v1.0',
    reference_count INTEGER DEFAULT 0,  -- è¢«å¼•ç”¨æ¬¡æ•°
    execution_count INTEGER DEFAULT 0,  -- æ‰§è¡Œæ¬¡æ•°
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64),
    approved_by VARCHAR(64),
    approved_at TIMESTAMP,
    deleted_at TIMESTAMP  -- è½¯åˆ é™¤
);

-- è„šæœ¬ç‰ˆæœ¬å†å²è¡¨
CREATE TABLE script_versions (
    id SERIAL PRIMARY KEY,
    script_id VARCHAR(64) REFERENCES scripts(id) ON DELETE CASCADE,
    version VARCHAR(32) NOT NULL,
    content TEXT NOT NULL,
    parameters JSONB,
    change_note TEXT,  -- ç‰ˆæœ¬å¤‡æ³¨
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64),
    UNIQUE(script_id, version)
);

-- è„šæœ¬å®¡æ ¸å†å²è¡¨
CREATE TABLE script_audit_log (
    id SERIAL PRIMARY KEY,
    script_id VARCHAR(64) REFERENCES scripts(id) ON DELETE CASCADE,
    action VARCHAR(32),  -- submit, approve, reject
    status VARCHAR(32),  -- pending, approved, rejected
    reason TEXT,
    performed_by VARCHAR(64),
    performed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ¨¡æ¿è¯„åˆ†è¡¨
CREATE TABLE template_ratings (
    id SERIAL PRIMARY KEY,
    template_id VARCHAR(64) REFERENCES templates(id) ON DELETE CASCADE,
    user_id VARCHAR(64) NOT NULL,
    overall_rating INTEGER CHECK (overall_rating >= 1 AND overall_rating <= 5),
    usability_rating INTEGER CHECK (usability_rating >= 1 AND usability_rating <= 5),
    documentation_rating INTEGER CHECK (documentation_rating >= 1 AND documentation_rating <= 5),
    coverage_rating INTEGER CHECK (coverage_rating >= 1 AND coverage_rating <= 5),
    comment TEXT,
    helpful_count INTEGER DEFAULT 0,  -- ç‚¹èµæ•°
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(template_id, user_id)
);

-- æ¨¡æ¿è¯„è®ºå›å¤è¡¨
CREATE TABLE template_rating_replies (
    id SERIAL PRIMARY KEY,
    rating_id INTEGER REFERENCES template_ratings(id) ON DELETE CASCADE,
    user_id VARCHAR(64) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ¨¡æ¿ç‰ˆæœ¬è¡¨
CREATE TABLE template_versions (
    id SERIAL PRIMARY KEY,
    template_id VARCHAR(64) REFERENCES templates(id) ON DELETE CASCADE,
    version VARCHAR(32) NOT NULL,
    variables JSONB,
    content JSONB NOT NULL,
    change_note TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64),
    UNIQUE(template_id, version)
);

-- æ¨¡æ¿ä½¿ç”¨ç»Ÿè®¡è¡¨
CREATE TABLE template_usage_stats (
    id SERIAL PRIMARY KEY,
    template_id VARCHAR(64) REFERENCES templates(id) ON DELETE CASCADE,
    used_at DATE NOT NULL,
    usage_count INTEGER DEFAULT 0,
    success_count INTEGER DEFAULT 0,
    failure_count INTEGER DEFAULT 0,
    UNIQUE(template_id, used_at)
);

-- æ¨¡æ¿Forkå…³ç³»è¡¨
CREATE TABLE template_forks (
    id SERIAL PRIMARY KEY,
    source_template_id VARCHAR(64) REFERENCES templates(id) ON DELETE SET NULL,
    forked_template_id VARCHAR(64) REFERENCES templates(id) ON DELETE CASCADE,
    forked_by VARCHAR(64),
    forked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(forked_template_id)
);

-- æ•°æ®åº“è¿æ¥é…ç½®è¡¨
CREATE TABLE database_connections (
    id VARCHAR(64) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(32) NOT NULL,  -- mysql, postgresql, sqlite
    host VARCHAR(255),
    port INTEGER,
    database_name VARCHAR(255),
    username VARCHAR(255),
    password_encrypted TEXT,  -- åŠ å¯†å­˜å‚¨
    ssl_enabled BOOLEAN DEFAULT FALSE,
    read_only BOOLEAN DEFAULT FALSE,
    connection_timeout INTEGER DEFAULT 30,
    status VARCHAR(32) DEFAULT 'offline',  -- online, offline, error
    last_connected_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64)
);

-- æŸ¥è¯¢æ¨¡æ¿è¡¨
CREATE TABLE query_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    database_connection_id VARCHAR(64) REFERENCES database_connections(id) ON DELETE CASCADE,
    sql_content TEXT NOT NULL,
    category VARCHAR(64),
    usage_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(64)
);

-- SQLæŸ¥è¯¢å†å²è¡¨
CREATE TABLE query_history (
    id SERIAL PRIMARY KEY,
    database_connection_id VARCHAR(64) REFERENCES database_connections(id) ON DELETE CASCADE,
    sql_content TEXT NOT NULL,
    execution_time_ms INTEGER,
    rows_affected INTEGER,
    status VARCHAR(32),  -- success, error
    error_message TEXT,
    executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    executed_by VARCHAR(64)
);

-- æ•°æ®åº“æ“ä½œå®¡è®¡è¡¨
CREATE TABLE database_operation_audit (
    id SERIAL PRIMARY KEY,
    database_connection_id VARCHAR(64) REFERENCES database_connections(id) ON DELETE CASCADE,
    operation_type VARCHAR(32),  -- SELECT, INSERT, UPDATE, DELETE, DROP, etc.
    table_name VARCHAR(255),
    sql_content TEXT NOT NULL,
    rows_affected INTEGER,
    status VARCHAR(32),  -- success, blocked, error
    blocked_reason TEXT,  -- åªè¯»æ¨¡å¼é˜»æ­¢åŸå› 
    executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    executed_by VARCHAR(64)
);
```

-- ç´¢å¼•ä¼˜åŒ–
```sql
-- è„šæœ¬ç®¡ç†ç´¢å¼•
CREATE INDEX idx_scripts_category ON scripts(category);
CREATE INDEX idx_scripts_status ON scripts(status);
CREATE INDEX idx_scripts_visibility ON scripts(visibility);
CREATE INDEX idx_scripts_created_by ON scripts(created_by);
CREATE INDEX idx_script_versions_script_id ON script_versions(script_id);

-- æ¨¡æ¿ç®¡ç†ç´¢å¼•
CREATE INDEX idx_template_ratings_template_id ON template_ratings(template_id);
CREATE INDEX idx_template_versions_template_id ON template_versions(template_id);
CREATE INDEX idx_template_usage_stats_template_id_date ON template_usage_stats(template_id, used_at);
CREATE INDEX idx_template_forks_source ON template_forks(source_template_id);

-- æ•°æ®åº“ç®¡ç†ç´¢å¼•
CREATE INDEX idx_database_connections_created_by ON database_connections(created_by);
CREATE INDEX idx_query_templates_db_id ON query_templates(database_connection_id);
CREATE INDEX idx_query_history_db_id ON query_history(database_connection_id);
CREATE INDEX idx_query_history_executed_at ON query_history(executed_at);
CREATE INDEX idx_db_audit_db_id ON database_operation_audit(database_connection_id);
CREATE INDEX idx_db_audit_executed_at ON database_operation_audit(executed_at);
```

### APIè®¾è®¡

#### å·¥ä½œæµAPI

```
POST   /api/v2/workflows              # åˆ›å»ºå·¥ä½œæµ
GET    /api/v2/workflows              # åˆ—å‡ºå·¥ä½œæµ
GET    /api/v2/workflows/:id          # è·å–å·¥ä½œæµè¯¦æƒ…
PUT    /api/v2/workflows/:id          # æ›´æ–°å·¥ä½œæµ
DELETE /api/v2/workflows/:id          # åˆ é™¤å·¥ä½œæµ

POST   /api/v2/workflows/:id/execute  # æ‰§è¡Œå·¥ä½œæµ
GET    /api/v2/workflows/:id/runs     # å·¥ä½œæµæ‰§è¡Œå†å²
GET    /api/v2/workflow-runs/:id      # æ‰§è¡Œè¯¦æƒ…
POST   /api/v2/workflow-runs/:id/cancel  # å–æ¶ˆæ‰§è¡Œ
```

#### æ¨¡æ¿API

```
POST   /api/v2/templates              # åˆ›å»ºæ¨¡æ¿
GET    /api/v2/templates              # æµè§ˆæ¨¡æ¿ï¼ˆæ”¯æŒåˆ†ç±»ã€æœç´¢ï¼‰
GET    /api/v2/templates/:id          # è·å–æ¨¡æ¿è¯¦æƒ…
POST   /api/v2/templates/:id/render   # æ¸²æŸ“æ¨¡æ¿ï¼ˆå¡«å……å˜é‡ï¼‰
POST   /api/v2/templates/:id/clone    # å…‹éš†æ¨¡æ¿
PUT    /api/v2/templates/:id/rating   # è¯„åˆ†
```

#### å¯¼å…¥/å¯¼å‡ºAPI

```
POST   /api/v2/import/tests           # å¯¼å…¥æµ‹è¯•
POST   /api/v2/import/workflows       # å¯¼å…¥å·¥ä½œæµ
GET    /api/v2/import/history         # å¯¼å…¥å†å²

GET    /api/v2/export/tests           # å¯¼å‡ºæµ‹è¯•ï¼ˆæ”¯æŒCSV/Excel/JSONï¼‰
GET    /api/v2/export/workflows/:id   # å¯¼å‡ºå·¥ä½œæµ
```

---

## å®æ–½è·¯çº¿å›¾

### Phase 1: å¿«é€Ÿä»·å€¼äº¤ä»˜ï¼ˆ2-4å‘¨ï¼‰

**ç›®æ ‡**: è§£å†³æœ€å¤§ç—›ç‚¹ï¼Œå¿«é€Ÿè§æ•ˆ

#### ä»»åŠ¡æ¸…å•

- [ ] **æ•°æ®å¯¼å…¥åŠŸèƒ½**
  - [ ] CSVå¯¼å…¥è§£æå™¨
  - [ ] Excelå¯¼å…¥è§£æå™¨ï¼ˆä½¿ç”¨excelizeåº“ï¼‰
  - [ ] JSON/YAMLå¯¼å…¥
  - [ ] å¯¼å…¥APIç«¯ç‚¹
  - [ ] éªŒè¯ä¸é”™è¯¯å¤„ç†

- [ ] **æ‰¹é‡æ‰§è¡Œ**
  - [ ] æŒ‰æ ‡ç­¾æ‰¹é‡æ‰§è¡Œ
  - [ ] æ‰¹é‡æ‰§è¡ŒAPI
  - [ ] æ‰¹é‡ç»“æœæ±‡æ€»

- [ ] **åŸºç¡€æ¨¡æ¿ç³»ç»Ÿ**
  - [ ] æ¨¡æ¿å®šä¹‰æ ¼å¼
  - [ ] å˜é‡æ›¿æ¢å¼•æ“
  - [ ] æ¨¡æ¿API
  - [ ] 3-5ä¸ªå®˜æ–¹æ¨¡æ¿

- [ ] **å‰ç«¯å¢å¼ºï¼ˆå½“å‰æŠ€æœ¯æ ˆï¼‰**
  - [ ] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
  - [ ] å¯¼å…¥è¿›åº¦æ˜¾ç¤º
  - [ ] æ¨¡æ¿é€‰æ‹©å™¨
  - [ ] æ‰¹é‡æ“ä½œUI

#### æŠ€æœ¯æ ˆ

- åç«¯: Go + Gin + SQLiteï¼ˆä¿æŒä¸å˜ï¼‰
- å‰ç«¯: å½“å‰Reactï¼ˆCDNï¼‰ï¼Œå°å¹…å¢å¼º
- æ–°å¢åº“: excelize (Excel), go-yaml (YAML)

#### äº¤ä»˜ç‰©

- æ”¯æŒCSV/Excel/JSONå¯¼å…¥æµ‹è¯•ç”¨ä¾‹
- 3ä¸ªå®˜æ–¹æ¨¡æ¿ï¼ˆCRUDã€è®¤è¯ã€åˆ†é¡µï¼‰
- æ‰¹é‡æ‰§è¡Œå’Œç»“æœå¯¼å‡º
- ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹

#### æˆåŠŸæŒ‡æ ‡

- æ‰¹é‡å¯¼å…¥100ä¸ªæµ‹è¯•ç”¨ä¾‹ < 1åˆ†é’Ÿ
- ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæµ‹è¯• < 30ç§’
- ç”¨æˆ·æ»¡æ„åº¦è°ƒæŸ¥ > 8/10

---

### Phase 2: å·¥ä½œæµåŸºç¡€ï¼ˆ4-6å‘¨ï¼‰

**ç›®æ ‡**: æ”¯æŒå¤æ‚æµ‹è¯•åœºæ™¯ç¼–æ’

#### ä»»åŠ¡æ¸…å•

- [ ] **å·¥ä½œæµå¼•æ“**
  - [ ] å·¥ä½œæµå®šä¹‰æ ¼å¼ï¼ˆYAMLï¼‰
  - [ ] å·¥ä½œæµè§£æå™¨
  - [ ] é¡ºåºæ‰§è¡Œå¼•æ“
  - [ ] çŠ¶æ€ä¸Šä¸‹æ–‡ç®¡ç†
  - [ ] ä¾èµ–è§£æï¼ˆæ‹“æ‰‘æ’åºï¼‰

- [ ] **å˜é‡ä¸ä¼ é€’**
  - [ ] å˜é‡æ›¿æ¢å¼•æ“
  - [ ] æ­¥éª¤é—´æ•°æ®ä¼ é€’
  - [ ] è¡¨è¾¾å¼æ±‚å€¼å™¨

- [ ] **é”™è¯¯å¤„ç†**
  - [ ] å¤±è´¥ç­–ç•¥ï¼ˆabort/continue/retryï¼‰
  - [ ] é‡è¯•æœºåˆ¶

- [ ] **APIå¼€å‘**
  - [ ] å·¥ä½œæµCRUD API
  - [ ] å·¥ä½œæµæ‰§è¡ŒAPI
  - [ ] æ‰§è¡Œå†å²æŸ¥è¯¢

- [ ] **æ•°æ®åº“**
  - [ ] workflowsè¡¨
  - [ ] workflow_runsè¡¨
  - [ ] è¿ç§»è„šæœ¬

- [ ] **å‰ç«¯ï¼ˆç®€å•ç‰ˆï¼‰**
  - [ ] å·¥ä½œæµåˆ—è¡¨é¡µ
  - [ ] å·¥ä½œæµç¼–è¾‘å™¨ï¼ˆYAMLæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
  - [ ] æ‰§è¡Œç›‘æ§é¡µ
  - [ ] ç»“æœå±•ç¤º

#### æŠ€æœ¯éš¾ç‚¹

- å·¥ä½œæµDAGçš„æ‹“æ‰‘æ’åº
- å˜é‡ä½œç”¨åŸŸç®¡ç†
- é•¿æ—¶é—´è¿è¡Œçš„å·¥ä½œæµçŠ¶æ€æŒä¹…åŒ–

#### äº¤ä»˜ç‰©

- YAMLæ ¼å¼çš„å·¥ä½œæµå®šä¹‰
- å·¥ä½œæµæ‰§è¡Œå¼•æ“
- ç®€å•çš„å·¥ä½œæµç¼–è¾‘UI
- 5ä¸ªç¤ºä¾‹å·¥ä½œæµ

#### æˆåŠŸæŒ‡æ ‡

- æ”¯æŒ10æ­¥éª¤ä»¥ä¸Šçš„å¤æ‚å·¥ä½œæµ
- å·¥ä½œæµæ‰§è¡ŒæˆåŠŸç‡ > 95%
- æ­¥éª¤é—´æ•°æ®ä¼ é€’æ­£ç¡®ç‡ 100%

---

### Phase 3: è„šæœ¬åŒ–å¢å¼ºï¼ˆ3-4å‘¨ï¼‰

**ç›®æ ‡**: èµ‹èƒ½é«˜çº§ç”¨æˆ·ï¼Œæä¾›ç¼–ç¨‹èƒ½åŠ›

#### ä»»åŠ¡æ¸…å•

- [ ] **Luaé›†æˆ**
  - [ ] é›†æˆgopher-lua
  - [ ] æ²™ç®±ç¯å¢ƒé…ç½®
  - [ ] é¢„å®šä¹‰å‡½æ•°åº“ï¼ˆhttp, json, logç­‰ï¼‰
  - [ ] æ‰§è¡Œè¶…æ—¶æ§åˆ¶
  - [ ] å†…å­˜é™åˆ¶

- [ ] **è„šæœ¬æ‰§è¡Œ**
  - [ ] è„šæœ¬æ­¥éª¤ç±»å‹
  - [ ] è„šæœ¬ä¸Šä¸‹æ–‡æ³¨å…¥
  - [ ] ç»“æœæå–

- [ ] **å®‰å…¨æœºåˆ¶**
  - [ ] æ¨¡å—é»‘åå•
  - [ ] ä»£ç å®¡æŸ¥æµç¨‹
  - [ ] æƒé™æ§åˆ¶

- [ ] **å‰ç«¯**
  - [ ] è„šæœ¬ç¼–è¾‘å™¨ï¼ˆMonaco Editorï¼‰
  - [ ] è¯­æ³•é«˜äº®
  - [ ] åœ¨çº¿è°ƒè¯•
  - [ ] ç¤ºä¾‹è„šæœ¬åº“

#### æŠ€æœ¯éš¾ç‚¹

- Luaæ²™ç®±å®‰å…¨æ€§
- Goä¸Luaæ•°æ®ç±»å‹è½¬æ¢
- è„šæœ¬è°ƒè¯•å·¥å…·

#### äº¤ä»˜ç‰©

- Luaè„šæœ¬å¼•æ“
- 20+é¢„å®šä¹‰å‡½æ•°
- è„šæœ¬ç¼–è¾‘å™¨
- 10ä¸ªè„šæœ¬ç¤ºä¾‹

#### æˆåŠŸæŒ‡æ ‡

- è„šæœ¬æ‰§è¡Œå®‰å…¨æ€§ï¼š0æ¼æ´
- æ‰§è¡Œæ€§èƒ½ï¼šç®€å•è„šæœ¬ < 100ms
- ç”¨æˆ·é‡‡çº³ç‡ > 30%

---

### Phase 4: å‰ç«¯ç°ä»£åŒ–ï¼ˆ6-8å‘¨ï¼‰

**ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒï¼Œæ”¯æŒå¤æ‚å¯è§†åŒ–

#### ä»»åŠ¡æ¸…å•

- [ ] **é¡¹ç›®æ­å»º**
  - [ ] Viteé¡¹ç›®åˆå§‹åŒ–
  - [ ] TypeScripté…ç½®
  - [ ] ESLint/Prettier
  - [ ] è·¯ç”±é…ç½®ï¼ˆReact Routerï¼‰
  - [ ] çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰

- [ ] **é¡µé¢è¿ç§»**
  - [ ] æµ‹è¯•åˆ—è¡¨é¡µ
  - [ ] æµ‹è¯•ç¼–è¾‘é¡µ
  - [ ] åˆ†ç»„ç®¡ç†é¡µ
  - [ ] ç»“æœæŸ¥çœ‹é¡µ

- [ ] **å·¥ä½œæµå¯è§†åŒ–**
  - [ ] é›†æˆReact Flow
  - [ ] æ‹–æ‹½å¼å·¥ä½œæµç¼–è¾‘å™¨
  - [ ] èŠ‚ç‚¹è‡ªå®šä¹‰
  - [ ] è‡ªåŠ¨å¸ƒå±€
  - [ ] å®æ—¶é¢„è§ˆ

- [ ] **ç»“æœå¯è§†åŒ–**
  - [ ] é›†æˆECharts
  - [ ] æµ‹è¯•è¶‹åŠ¿å›¾
  - [ ] æ€§èƒ½åˆ†æå›¾
  - [ ] è°ƒç”¨é“¾å›¾

- [ ] **æ¨¡æ¿å¸‚åœº**
  - [ ] æ¨¡æ¿æµè§ˆé¡µ
  - [ ] åˆ†ç±»ç­›é€‰
  - [ ] æœç´¢åŠŸèƒ½
  - [ ] æ¨¡æ¿é¢„è§ˆ
  - [ ] ä¸€é”®å…‹éš†

- [ ] **å®æ—¶ç›‘æ§**
  - [ ] WebSocketé›†æˆ
  - [ ] å®æ—¶æ—¥å¿—æµ
  - [ ] è¿›åº¦æ¡
  - [ ] é€šçŸ¥ä¸­å¿ƒ

#### æŠ€æœ¯æ ˆ

- Vite 5
- React 18 + TypeScript
- React Router v6
- Zustand (çŠ¶æ€ç®¡ç†)
- Ant Design 5
- React Flow (å·¥ä½œæµ)
- ECharts (å›¾è¡¨)
- Monaco Editor (ä»£ç ç¼–è¾‘)

#### äº¤ä»˜ç‰©

- å®Œæ•´çš„ç°ä»£åŒ–å‰ç«¯åº”ç”¨
- å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨
- ä¸°å¯Œçš„æ•°æ®å¯è§†åŒ–
- å“åº”å¼è®¾è®¡

#### æˆåŠŸæŒ‡æ ‡

- é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- äº¤äº’å“åº”æ—¶é—´ < 100ms
- å¯è§†åŒ–ç¼–è¾‘å™¨ä¸Šæ‰‹æ—¶é—´ < 5åˆ†é’Ÿ
- ç”¨æˆ·æ»¡æ„åº¦ > 9/10

---

## é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| **Luaå®‰å…¨æ¼æ´** | é«˜ | ä¸­ | ä¸¥æ ¼æ²™ç®±ã€ä»£ç å®¡æŸ¥ã€é™åˆ¶æƒé™ |
| **å·¥ä½œæµæ‰§è¡Œç¨³å®šæ€§** | é«˜ | ä¸­ | å……åˆ†æµ‹è¯•ã€é‡è¯•æœºåˆ¶ã€çŠ¶æ€æ¢å¤ |
| **å‰ç«¯é‡æ„å¼•å…¥Bug** | ä¸­ | é«˜ | æ¸è¿›å¼è¿ç§»ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç°åº¦å‘å¸ƒ |
| **æ€§èƒ½ä¸‹é™** | ä¸­ | ä¸­ | æ€§èƒ½æµ‹è¯•ã€ä¼˜åŒ–æŸ¥è¯¢ã€ç¼“å­˜æœºåˆ¶ |
| **å‘åå…¼å®¹æ€§** | ä¸­ | ä½ | è¿ç§»å·¥å…·ã€åŒç‰ˆæœ¬å¹¶è¡Œã€æ–‡æ¡£æ¸…æ™° |

### ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| **ç”¨æˆ·é‡‡çº³ç‡ä½** | é«˜ | ä¸­ | ç”¨æˆ·è°ƒç ”ã€è¯•ç‚¹éªŒè¯ã€åŸ¹è®­æ”¯æŒ |
| **è¿‡åº¦å·¥ç¨‹** | ä¸­ | é«˜ | MVPéªŒè¯ã€éœ€æ±‚ä¼˜å…ˆçº§ã€æ¸è¿›äº¤ä»˜ |
| **èµ„æºä¸è¶³** | é«˜ | ä¸­ | åˆç†æ’æœŸã€å¤–éƒ¨æ”¯æŒã€èŒƒå›´æ§åˆ¶ |
| **ç«å“æ›¿ä»£** | ä¸­ | ä½ | å·®å¼‚åŒ–å®šä½ã€æˆæœ¬ä¼˜åŠ¿ã€å®šåˆ¶åŒ– |

### é¡¹ç›®é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| **èŒƒå›´è”“å»¶** | é«˜ | é«˜ | ä¸¥æ ¼éœ€æ±‚ç®¡ç†ã€ç‰ˆæœ¬è§„åˆ’ã€å®šæœŸè¯„å®¡ |
| **æŠ€æœ¯å€ºåŠ¡** | ä¸­ | ä¸­ | ä»£ç å®¡æŸ¥ã€é‡æ„è®¡åˆ’ã€æ–‡æ¡£å®Œå–„ |
| **å›¢é˜Ÿèƒ½åŠ›** | ä¸­ | ä¸­ | æŠ€æœ¯åŸ¹è®­ã€ç»“å¯¹ç¼–ç¨‹ã€å¤–éƒ¨å’¨è¯¢ |
| **æ—¶é—´å»¶æœŸ** | ä¸­ | ä¸­ | ç¼“å†²æ—¶é—´ã€é‡Œç¨‹ç¢‘æ£€æŸ¥ã€é£é™©é¢„è­¦ |

---

## é™„å½•

### A. å‚è€ƒæ¡ˆä¾‹

#### å•†ä¸šäº§å“

- **Postman**: APIæµ‹è¯•å·¥ä½œæµã€é›†åˆç®¡ç†ã€ç¯å¢ƒå˜é‡
- **Katalon Studio**: è®°å½•å›æ”¾ã€æ•°æ®é©±åŠ¨ã€æµ‹è¯•å¥—ä»¶
- **TestRail**: æµ‹è¯•ç”¨ä¾‹ç®¡ç†ã€æŠ¥å‘Šã€é›†æˆ
- **Playwright**: è„šæœ¬åŒ–æµ‹è¯•ã€å¤šæµè§ˆå™¨æ”¯æŒ

#### å¼€æºé¡¹ç›®

- **JMeter**: æ€§èƒ½æµ‹è¯•ã€CSVæ•°æ®é›†ã€æ–­è¨€
- **Robot Framework**: å…³é”®å­—é©±åŠ¨ã€æ‰©å±•æ€§
- **Cypress**: E2Eæµ‹è¯•ã€æ—¶é—´æ—…è¡Œè°ƒè¯•
- **K6**: è„šæœ¬åŒ–æ€§èƒ½æµ‹è¯•ã€ç»“æœå¯è§†åŒ–

### B. æŠ€æœ¯é€‰å‹å¯¹æ¯”

#### å·¥ä½œæµå¼•æ“

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‰æ‹© |
|------|------|------|------|
| **Temporal** | æˆç†Ÿã€å¼ºå¤§ã€å®¹é”™ | é‡é‡çº§ã€å¤æ‚ | âŒ |
| **Cadence** | é«˜å¯ç”¨ã€çŠ¶æ€æœº | å­¦ä¹ æ›²çº¿é™¡ | âŒ |
| **è‡ªç ”è½»é‡å¼•æ“** | å¯æ§ã€è½»é‡ã€å®šåˆ¶ | åŠŸèƒ½æœ‰é™ | âœ… |

#### è„šæœ¬è¯­è¨€

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‰æ‹© |
|------|------|------|------|
| **Lua** | è½»é‡ã€åµŒå…¥æ€§å¥½ã€å®‰å…¨ | ç”Ÿæ€è¾ƒå° | âœ… |
| **JavaScript** | ç”Ÿæ€ä¸°å¯Œã€ç†Ÿæ‚‰ | åµŒå…¥å¤æ‚ | âŒ |
| **Python** | å¼ºå¤§ã€åº“å¤š | é‡é‡çº§ã€éš¾éš”ç¦» | âŒ |

#### å‰ç«¯æ¡†æ¶

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | é€‰æ‹© |
|------|------|------|------|
| **Next.js** | SSRã€å…¨æ ˆã€ä¼˜åŒ– | è¿‡åº¦è®¾è®¡ã€å¤æ‚ | âŒ |
| **Vite + React** | å¿«é€Ÿã€çµæ´»ã€è½»é‡ | éœ€é…ç½® | âœ… |
| **Vue 3** | æ¸è¿›å¼ã€ç®€å• | å›¢é˜Ÿä¸ç†Ÿæ‚‰ | âŒ |

### C. ä¼°ç®—ä¸èµ„æº

#### å·¥ä½œé‡ä¼°ç®—

| é˜¶æ®µ | ä»»åŠ¡é‡ï¼ˆäººå¤©ï¼‰ | æµ‹è¯•ï¼ˆäººå¤©ï¼‰ | æ–‡æ¡£ï¼ˆäººå¤©ï¼‰ | æ€»è®¡ |
|------|--------------|-------------|-------------|------|
| Phase 1 | 12 | 3 | 2 | **17** |
| Phase 2 | 20 | 5 | 3 | **28** |
| Phase 3 | 15 | 4 | 2 | **21** |
| Phase 4 | 30 | 8 | 4 | **42** |
| **æ€»è®¡** | **77** | **20** | **11** | **108** |

æŒ‰2äººå›¢é˜Ÿï¼Œçº¦ **3-4ä¸ªæœˆ** å®Œæˆå…¨éƒ¨é˜¶æ®µã€‚

#### èµ„æºéœ€æ±‚

- **å¼€å‘**: 2åå…¨æ ˆå·¥ç¨‹å¸ˆï¼ˆGo + Reactï¼‰
- **æµ‹è¯•**: 1åQAå·¥ç¨‹å¸ˆï¼ˆå…¼èŒï¼‰
- **è®¾è®¡**: UI/UXè®¾è®¡å¸ˆæ”¯æŒï¼ˆPhase 4ï¼‰
- **è¿ç»´**: DevOpsæ”¯æŒï¼ˆéƒ¨ç½²ã€ç›‘æ§ï¼‰

### D. æˆåŠŸæŒ‡æ ‡ï¼ˆKPIï¼‰

| æŒ‡æ ‡ | åŸºçº¿ | ç›®æ ‡ | æµ‹é‡æ–¹å¼ |
|------|------|------|---------|
| **æµ‹è¯•åˆ›å»ºæ•ˆç‡** | 1ä¸ª/åˆ†é’Ÿ | 100ä¸ª/åˆ†é’Ÿ | å¯¼å…¥åŠŸèƒ½æ€§èƒ½æµ‹è¯• |
| **å·¥ä½œæµæ‰§è¡ŒæˆåŠŸç‡** | - | > 95% | æ‰§è¡Œæ—¥å¿—ç»Ÿè®¡ |
| **ç”¨æˆ·æ´»è·ƒåº¦** | 100% | 120% | DAU/MAU |
| **åŠŸèƒ½é‡‡çº³ç‡** | - | > 50% | æ–°åŠŸèƒ½ä½¿ç”¨ç‡ |
| **é¡µé¢æ€§èƒ½** | 5ç§’ | < 2ç§’ | Lighthouseè¯„åˆ† |
| **ç”¨æˆ·æ»¡æ„åº¦** | 7/10 | > 9/10 | NPSè°ƒæŸ¥ |

### E. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **DAG** | æœ‰å‘æ— ç¯å›¾ï¼Œç”¨äºè¡¨ç¤ºå·¥ä½œæµæ­¥éª¤ä¾èµ–å…³ç³» |
| **DSL** | é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œå¦‚å·¥ä½œæµå®šä¹‰YAML |
| **æ²™ç®±** | éš”ç¦»çš„æ‰§è¡Œç¯å¢ƒï¼Œé™åˆ¶è„šæœ¬æƒé™ |
| **æ‹“æ‰‘æ’åº** | å¯¹DAGèŠ‚ç‚¹æ’åºï¼Œç¡®ä¿ä¾èµ–å…³ç³»æ»¡è¶³ |
| **æ•°æ®é©±åŠ¨æµ‹è¯•** | ç”¨ä¸åŒæ•°æ®é›†è¿è¡ŒåŒä¸€æµ‹è¯•é€»è¾‘ |
| **TTI** | Time to Interactiveï¼Œé¡µé¢å¯äº¤äº’æ—¶é—´ |
| **SSR** | Server-Side Renderingï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ |

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|---------|
| 1.0 | 2025-11-21 | æµ‹è¯•æ¡†æ¶å›¢é˜Ÿ | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£ç»“æŸ**
